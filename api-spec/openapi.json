{"openapi":"3.1.0","info":{"title":"Pocket Guide POI Metadata API","description":"API for managing POI metadata including coordinates, hours, and travel distances","version":"1.0.0"},"paths":{"/combo-tickets/cities/{city}":{"get":{"tags":["combo-tickets"],"summary":"List Combo Tickets","description":"List all combo tickets for a city.\n\nArgs:\n    city: City name (e.g., \"rome\", \"paris\")\n\nReturns:\n    List of combo tickets with metadata","operationId":"list_combo_tickets_combo_tickets_cities__city__get","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComboTicketsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["combo-tickets"],"summary":"Create Combo Ticket","description":"Create a new combo ticket for a city.\n\nArgs:\n    city: City name\n    ticket: Combo ticket data\n\nReturns:\n    Success response with created ticket ID","operationId":"create_combo_ticket_combo_tickets_cities__city__post","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComboTicketCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api_combo_tickets__SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/combo-tickets/cities/{city}/{ticket_id}":{"get":{"tags":["combo-tickets"],"summary":"Get Combo Ticket","description":"Get a specific combo ticket by ID.\n\nArgs:\n    city: City name\n    ticket_id: Combo ticket ID\n\nReturns:\n    Combo ticket details","operationId":"get_combo_ticket_combo_tickets_cities__city___ticket_id__get","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}},{"name":"ticket_id","in":"path","required":true,"schema":{"type":"string","title":"Ticket Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComboTicket"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["combo-tickets"],"summary":"Update Combo Ticket","description":"Update an existing combo ticket.\n\nArgs:\n    city: City name\n    ticket_id: Combo ticket ID to update\n    update: Updated fields\n\nReturns:\n    Success response","operationId":"update_combo_ticket_combo_tickets_cities__city___ticket_id__put","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}},{"name":"ticket_id","in":"path","required":true,"schema":{"type":"string","title":"Ticket Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComboTicketUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api_combo_tickets__SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["combo-tickets"],"summary":"Delete Combo Ticket","description":"Delete a combo ticket and remove references from POIs.\n\nArgs:\n    city: City name\n    ticket_id: Combo ticket ID to delete\n\nReturns:\n    Success response","operationId":"delete_combo_ticket_combo_tickets_cities__city___ticket_id__delete","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}},{"name":"ticket_id","in":"path","required":true,"schema":{"type":"string","title":"Ticket Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api_combo_tickets__SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/combo-tickets/cities/{city}/validate":{"get":{"tags":["combo-tickets"],"summary":"Validate Combo Tickets","description":"Validate combo ticket data for consistency.\n\nChecks:\n- All members in combo tickets are valid POIs\n- All POIs referencing combo tickets have valid IDs\n- Bi-directional consistency\n\nArgs:\n    city: City name\n\nReturns:\n    Validation results with list of issues","operationId":"validate_combo_tickets_combo_tickets_cities__city__validate_get","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/combo-tickets/cities/{city}/pois/{poi_name}":{"get":{"tags":["combo-tickets"],"summary":"Get Combo Tickets For Poi","description":"Get all combo tickets that include a specific POI.\n\nArgs:\n    city: City name\n    poi_name: POI name\n\nReturns:\n    List of combo tickets containing this POI","operationId":"get_combo_tickets_for_poi_combo_tickets_cities__city__pois__poi_name__get","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}},{"name":"poi_name","in":"path","required":true,"schema":{"type":"string","title":"Poi Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ComboTicket"},"title":"Response Get Combo Tickets For Poi Combo Tickets Cities  City  Pois  Poi Name  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tour/generate":{"post":{"tags":["tour"],"summary":"Generate Tour","description":"Generate an AI-powered walking tour itinerary.\n\nThis endpoint:\n1. Uses AI to select optimal POIs based on preferences\n2. Optimizes the visiting sequence using selected algorithm\n3. Creates a day-by-day itinerary\n4. Saves the tour if requested\n\nArgs:\n    request: Tour generation parameters\n\nReturns:\n    Generated tour data with itinerary and metadata","operationId":"generate_tour_tour_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TourGenerationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TourGenerationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tour/status/{tour_id}":{"get":{"tags":["tour"],"summary":"Get Tour Generation Status","description":"Get the status of a tour generation request.\n\nThis is useful for async generation in the future.\n\nArgs:\n    tour_id: Tour ID or generation task ID\n\nReturns:\n    Generation status","operationId":"get_tour_generation_status_tour_status__tour_id__get","parameters":[{"name":"tour_id","in":"path","required":true,"schema":{"type":"string","title":"Tour Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","description":"API root endpoint","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Root  Get"}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Health Check Health Get"}}}}}}},"/cities":{"get":{"summary":"List Cities","description":"List all cities with POI data.\n\nReturns a list of cities with their POI counts from content directory.","operationId":"list_cities_cities_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/City"},"type":"array","title":"Response List Cities Cities Get"}}}}}}},"/cities/{city}/pois":{"get":{"summary":"List City Pois","description":"List all POIs for a specific city.\n\nReturns summary information for each POI including metadata status.\nLoads from content directory (content/{city}/) instead of poi_research.","operationId":"list_city_pois_cities__city__pois_get","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/POISummary"},"title":"Response List City Pois Cities  City  Pois Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pois/{city}/{poi_id}":{"get":{"summary":"Get Poi Metadata","description":"Get detailed metadata for a specific POI.\n\nReturns all metadata including coordinates, hours, and visit information.\nTries to load from content directory first, then falls back to poi_research.","operationId":"get_poi_metadata_pois__city___poi_id__get","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}},{"name":"poi_id","in":"path","required":true,"schema":{"type":"string","title":"Poi Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/POIDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pois/{city}/{poi_id}/metadata":{"put":{"summary":"Update Poi Metadata","description":"Update metadata for a specific POI.\n\nAllows manual editing of coordinates, visit info, and other metadata fields.\nSaves to content directory if POI exists there, otherwise to poi_research.","operationId":"update_poi_metadata_pois__city___poi_id__metadata_put","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}},{"name":"poi_id","in":"path","required":true,"schema":{"type":"string","title":"Poi Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/POIMetadataUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api_models__SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pois/{city}/{poi_id}/recollect":{"post":{"summary":"Recollect Poi Metadata","description":"Re-collect metadata from Google Maps API for a specific POI.\n\nUseful for refreshing outdated information.","operationId":"recollect_poi_metadata_pois__city___poi_id__recollect_post","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}},{"name":"poi_id","in":"path","required":true,"schema":{"type":"string","title":"Poi Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api_models__SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/distances/{city}":{"get":{"summary":"Get Distance Matrix","description":"Get the distance matrix for all POIs in a city.\n\nReturns travel times and distances for walking, transit, and driving.","operationId":"get_distance_matrix_distances__city__get","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DistanceMatrix"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/distances/{city}/recalculate":{"post":{"summary":"Recalculate Distance Matrix","description":"Recalculate the distance matrix for a city.\n\nUses Google Maps Distance Matrix API to calculate fresh travel times.","operationId":"recalculate_distance_matrix_distances__city__recalculate_post","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api_models__SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cities/{city}/collect":{"post":{"summary":"Collect City Metadata","description":"Collect metadata for all POIs in a city.\n\nThis endpoint triggers full metadata collection including:\n- POI coordinates and details from Google Maps\n- Distance matrix calculation","operationId":"collect_city_metadata_cities__city__collect_post","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cities/{city}/verify":{"get":{"summary":"Verify City Metadata","description":"Verify metadata completeness for all POIs in a city.\n\nReturns a report showing which POIs have complete metadata\nand which fields are missing.","operationId":"verify_city_metadata_cities__city__verify_get","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerificationReport"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pois/{city}/{poi_id}/transcript":{"get":{"summary":"Get Transcript","description":"Get transcript and summary for a POI in a specific language.\n\nIf tour_id is provided, will try to use the tour's linked transcript.\nFalls back to standard POI transcript if tour link doesn't exist.\n\nArgs:\n    city: City name (e.g., \"Athens\")\n    poi_id: POI identifier in kebab-case (e.g., \"acropolis-parthenon\")\n    language: ISO 639-1 language code (e.g., 'en', 'fr', 'es') - defaults to 'en'\n    tour_id: Optional tour ID to load tour-specific transcript link\n\nReturns:\n    TranscriptData with transcript text, summary points, availability flags, and language info","operationId":"get_transcript_pois__city___poi_id__transcript_get","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}},{"name":"poi_id","in":"path","required":true,"schema":{"type":"string","title":"Poi Id"}},{"name":"language","in":"query","required":false,"schema":{"type":"string","default":"en","title":"Language"}},{"name":"tour_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tour Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranscriptData"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"summary":"Update Transcript","description":"Update transcript for a POI in a specific language (creates backup before saving).\n\nArgs:\n    city: City name (e.g., \"Athens\")\n    poi_id: POI identifier in kebab-case (e.g., \"acropolis-parthenon\")\n    update: TranscriptUpdate with new transcript text and optional language code\n\nReturns:\n    SuccessResponse with backup filename","operationId":"update_transcript_pois__city___poi_id__transcript_put","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}},{"name":"poi_id","in":"path","required":true,"schema":{"type":"string","title":"Poi Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranscriptUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api_models__SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pois/{city}/{poi_id}/research":{"get":{"summary":"Get Research","description":"Get research data for a POI (both structured and raw YAML).\n\nArgs:\n    city: City name (e.g., \"Athens\")\n    poi_id: POI identifier in kebab-case (e.g., \"acropolis-parthenon\")\n\nReturns:\n    ResearchData with structured fields and raw YAML content","operationId":"get_research_pois__city___poi_id__research_get","parameters":[{"name":"city","in":"path","required":true,"schema":{"type":"string","title":"City"}},{"name":"poi_id","in":"path","required":true,"schema":{"type":"string","title":"Poi Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResearchData"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tours":{"get":{"summary":"List Tours","description":"List all saved tours, grouped by city.\n\nReturns list of tour summaries with key metadata.","operationId":"list_tours_tours_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TourSummary"},"type":"array","title":"Response List Tours Tours Get"}}}}}}},"/tours/{tour_id}":{"get":{"summary":"Get Tour","description":"Get complete tour details including itinerary, backup POIs, and selection transparency.\n\nArgs:\n    tour_id: Tour identifier (e.g., \"rome-tour-20260129-111100-aa7baf\")\n    language: ISO 639-1 language code (e.g., 'en', 'zh-tw') - defaults to 'en'\n\nReturns:\n    Complete tour details with all metadata","operationId":"get_tour_tours__tour_id__get","parameters":[{"name":"tour_id","in":"path","required":true,"schema":{"type":"string","title":"Tour Id"}},{"name":"language","in":"query","required":false,"schema":{"type":"string","default":"en","title":"Language"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TourDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tours/{tour_id}/transcript-links":{"get":{"summary":"Get Tour Transcript Links","description":"Get transcript links for a tour.\n\nReturns which transcripts are linked to this specific tour.\nThis allows the tour to reference specific transcript versions.\n\nArgs:\n    tour_id: Tour identifier (e.g., \"rome-tour-20260205-121250-11edf4\")\n    language: Language code (e.g., 'en', 'zh-tw')\n\nReturns:\n    TranscriptLinks with all POI transcript mappings for this tour","operationId":"get_tour_transcript_links_tours__tour_id__transcript_links_get","parameters":[{"name":"tour_id","in":"path","required":true,"schema":{"type":"string","title":"Tour Id"}},{"name":"language","in":"query","required":false,"schema":{"type":"string","default":"en","title":"Language"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranscriptLinks"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tours/{tour_id}/replace-poi":{"post":{"summary":"Replace Poi In Tour","description":"Replace a POI in a tour with a backup POI.\n\nSupports two modes:\n- simple: Replace POI and keep current order/timing\n- reoptimize: Replace POI and re-run itinerary optimizer (NOT YET IMPLEMENTED)\n\nArgs:\n    tour_id: Tour identifier\n    request: POI replacement request with mode, POI names, language, and day\n\nReturns:\n    POI replacement response with success status and new version info","operationId":"replace_poi_in_tour_tours__tour_id__replace_poi_post","parameters":[{"name":"tour_id","in":"path","required":true,"schema":{"type":"string","title":"Tour Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/POIReplacementRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/POIReplacementResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tours/{tour_id}/replace-pois-batch":{"post":{"summary":"Batch Replace Pois In Tour","description":"Replace multiple POIs in a tour with backup POIs in a single operation.\n\nSupports two modes:\n- simple: Replace POIs and keep current order/timing\n- reoptimize: Replace POIs and re-run itinerary optimizer\n\nArgs:\n    tour_id: Tour identifier\n    request: Batch POI replacement request with mode, list of replacements, and language\n\nReturns:\n    Batch POI replacement response with success status and new version info","operationId":"batch_replace_pois_in_tour_tours__tour_id__replace_pois_batch_post","parameters":[{"name":"tour_id","in":"path","required":true,"schema":{"type":"string","title":"Tour Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchPOIReplacementRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchPOIReplacementResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"BackupPOI":{"properties":{"poi":{"type":"string","title":"Poi","description":"Backup POI name"},"similarity_score":{"type":"number","title":"Similarity Score","description":"Similarity score to original POI"},"reason":{"type":"string","title":"Reason","description":"Why this is a good backup"},"substitute_scenario":{"type":"string","title":"Substitute Scenario","description":"When to use this backup"}},"type":"object","required":["poi","similarity_score","reason","substitute_scenario"],"title":"BackupPOI","description":"Backup/alternative POI"},"BatchPOIReplacementRequest":{"properties":{"replacements":{"items":{"$ref":"#/components/schemas/POIReplacementItem"},"type":"array","minItems":1,"title":"Replacements","description":"List of POI replacements to apply"},"mode":{"type":"string","pattern":"^(simple|reoptimize)$","title":"Mode","description":"Save mode: 'simple' or 'reoptimize'"},"language":{"type":"string","title":"Language","description":"Tour language code (ISO 639-1, e.g., 'en', 'zh-cn')","default":"en"}},"type":"object","required":["replacements","mode"],"title":"BatchPOIReplacementRequest","description":"Request to replace multiple POIs in a tour"},"BatchPOIReplacementResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether replacement was successful"},"tour_id":{"type":"string","title":"Tour Id","description":"Tour identifier"},"new_version":{"type":"integer","title":"New Version","description":"New version number"},"new_version_string":{"type":"string","title":"New Version String","description":"New version string (e.g., 'v2_2026-02-06')"},"replacements_applied":{"type":"integer","title":"Replacements Applied","description":"Number of replacements applied"},"replacements":{"items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array","title":"Replacements","description":"List of applied replacements"},"mode_used":{"type":"string","title":"Mode Used","description":"Save mode that was used"},"optimization_scores":{"anyOf":[{"$ref":"#/components/schemas/OptimizationScores"},{"type":"null"}],"description":"New optimization scores (if reoptimized)"},"message":{"type":"string","title":"Message","description":"Success message"}},"type":"object","required":["success","tour_id","new_version","new_version_string","replacements_applied","replacements","mode_used","message"],"title":"BatchPOIReplacementResponse","description":"Response after batch POI replacement"},"City":{"properties":{"name":{"type":"string","title":"Name"},"slug":{"type":"string","title":"Slug"},"poi_count":{"type":"integer","title":"Poi Count"}},"type":"object","required":["name","slug","poi_count"],"title":"City","description":"City information"},"CollectionResult":{"properties":{"city":{"type":"string","title":"City"},"pois_total":{"type":"integer","title":"Pois Total"},"pois_updated":{"type":"integer","title":"Pois Updated"},"distance_matrix":{"type":"object","title":"Distance Matrix"},"errors":{"items":{"type":"string"},"type":"array","title":"Errors","default":[]}},"type":"object","required":["city","pois_total","pois_updated","distance_matrix"],"title":"CollectionResult","description":"Result of metadata collection operation"},"ComboTicket":{"properties":{"id":{"type":"string","pattern":"^[a-z0-9_]+$","title":"Id"},"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name"},"description":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Description"},"type":{"type":"string","pattern":"^(same_day_consecutive|same_day_any_order|multi_day|same_day_clustered)$","title":"Type","default":"same_day_consecutive"},"members":{"items":{"type":"string"},"type":"array","maxItems":10,"minItems":2,"title":"Members"},"constraints":{"anyOf":[{"$ref":"#/components/schemas/ComboTicketConstraints"},{"type":"null"}]},"pricing":{"anyOf":[{"$ref":"#/components/schemas/ComboTicketPricing"},{"type":"null"}]},"booking_info":{"anyOf":[{"$ref":"#/components/schemas/ComboTicketBookingInfo"},{"type":"null"}]}},"type":"object","required":["id","name","members"],"title":"ComboTicket","description":"Full combo ticket model with metadata"},"ComboTicketBookingInfo":{"properties":{"required":{"type":"boolean","title":"Required","default":false},"recommended":{"type":"boolean","title":"Recommended","default":false},"advance_booking_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Advance Booking Days"},"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","title":"ComboTicketBookingInfo","description":"Combo ticket booking information"},"ComboTicketConstraints":{"properties":{"must_visit_together":{"type":"boolean","title":"Must Visit Together","default":true},"max_separation_hours":{"type":"number","title":"Max Separation Hours","default":4.0},"visit_order":{"type":"string","pattern":"^(fixed|flexible|chronological)$","title":"Visit Order","default":"flexible"},"same_day_required":{"type":"boolean","title":"Same Day Required","default":true}},"type":"object","title":"ComboTicketConstraints","description":"Combo ticket visit constraints"},"ComboTicketCreate":{"properties":{"id":{"type":"string","pattern":"^[a-z0-9_]+$","title":"Id"},"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name"},"description":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Description"},"type":{"type":"string","pattern":"^(same_day_consecutive|same_day_any_order|multi_day|same_day_clustered)$","title":"Type","default":"same_day_consecutive"},"members":{"items":{"type":"string"},"type":"array","maxItems":10,"minItems":2,"title":"Members"},"constraints":{"anyOf":[{"$ref":"#/components/schemas/ComboTicketConstraints"},{"type":"null"}]},"pricing":{"anyOf":[{"$ref":"#/components/schemas/ComboTicketPricing"},{"type":"null"}]},"booking_info":{"anyOf":[{"$ref":"#/components/schemas/ComboTicketBookingInfo"},{"type":"null"}]}},"type":"object","required":["id","name","members"],"title":"ComboTicketCreate","description":"Model for creating a combo ticket"},"ComboTicketPricing":{"properties":{"adult":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Adult"},"reduced":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Reduced"},"child":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Child"},"free_under_age":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Free Under Age"},"currency":{"type":"string","title":"Currency","default":"EUR"},"validity_days":{"type":"integer","title":"Validity Days","default":1},"savings":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Savings"},"savings_percentage":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Savings Percentage"}},"type":"object","title":"ComboTicketPricing","description":"Combo ticket pricing information"},"ComboTicketUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":100,"minLength":3},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Description"},"type":{"anyOf":[{"type":"string","pattern":"^(same_day_consecutive|same_day_any_order|multi_day|same_day_clustered)$"},{"type":"null"}],"title":"Type"},"members":{"anyOf":[{"items":{"type":"string"},"type":"array","maxItems":10,"minItems":2},{"type":"null"}],"title":"Members"},"constraints":{"anyOf":[{"$ref":"#/components/schemas/ComboTicketConstraints"},{"type":"null"}]},"pricing":{"anyOf":[{"$ref":"#/components/schemas/ComboTicketPricing"},{"type":"null"}]},"booking_info":{"anyOf":[{"$ref":"#/components/schemas/ComboTicketBookingInfo"},{"type":"null"}]}},"type":"object","title":"ComboTicketUpdate","description":"Model for updating a combo ticket (all fields optional)"},"ComboTicketsResponse":{"properties":{"combo_tickets":{"items":{"$ref":"#/components/schemas/ComboTicket"},"type":"array","title":"Combo Tickets"},"count":{"type":"integer","title":"Count"},"city":{"type":"string","title":"City"}},"type":"object","required":["combo_tickets","count","city"],"title":"ComboTicketsResponse","description":"Response containing list of combo tickets"},"Coordinates":{"properties":{"latitude":{"type":"number","title":"Latitude","description":"Latitude in decimal degrees"},"longitude":{"type":"number","title":"Longitude","description":"Longitude in decimal degrees"},"source":{"type":"string","title":"Source","description":"Data source (e.g., google_maps_api, nominatim)"},"collected_at":{"type":"string","title":"Collected At","description":"ISO 8601 timestamp of collection"}},"type":"object","required":["latitude","longitude","source","collected_at"],"title":"Coordinates","description":"Geographic coordinates for a POI"},"CoordinatesUpdate":{"properties":{"latitude":{"type":"number","maximum":90.0,"minimum":-90.0,"title":"Latitude"},"longitude":{"type":"number","maximum":180.0,"minimum":-180.0,"title":"Longitude"}},"type":"object","required":["latitude","longitude"],"title":"CoordinatesUpdate","description":"Model for updating coordinates"},"DistanceMatrix":{"properties":{"city":{"type":"string","title":"City"},"generated_at":{"type":"string","title":"Generated At"},"poi_count":{"type":"integer","title":"Poi Count"},"poi_pairs":{"additionalProperties":{"$ref":"#/components/schemas/POIPair"},"type":"object","title":"Poi Pairs"}},"type":"object","required":["city","generated_at","poi_count","poi_pairs"],"title":"DistanceMatrix","description":"Complete distance matrix for a city"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"OperationHours":{"properties":{"open_now":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Open Now","description":"Whether POI is currently open"},"weekday_text":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Weekday Text","description":"Human-readable hours for each day"},"periods":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Periods","description":"Structured opening periods"}},"type":"object","title":"OperationHours","description":"Operation hours for a POI"},"OptimizationScores":{"properties":{"distance_score":{"type":"number","title":"Distance Score","description":"Distance optimization score (0-1)"},"coherence_score":{"type":"number","title":"Coherence Score","description":"Thematic coherence score (0-1)"},"overall_score":{"type":"number","title":"Overall Score","description":"Overall optimization score (0-1)"},"total_distance_km":{"type":"number","title":"Total Distance Km","description":"Total walking distance in km"}},"type":"object","required":["distance_score","coherence_score","overall_score","total_distance_km"],"title":"OptimizationScores","description":"Optimization metrics for the tour"},"POIDetail":{"properties":{"poi_id":{"type":"string","title":"Poi Id"},"poi_name":{"type":"string","title":"Poi Name"},"city":{"type":"string","title":"City"},"metadata":{"anyOf":[{"$ref":"#/components/schemas/POIMetadata"},{"type":"null"}]}},"type":"object","required":["poi_id","poi_name","city"],"title":"POIDetail","description":"Detailed POI information including metadata"},"POIMetadata":{"properties":{"coordinates":{"anyOf":[{"$ref":"#/components/schemas/Coordinates"},{"type":"null"}]},"operation_hours":{"anyOf":[{"$ref":"#/components/schemas/OperationHours"},{"type":"null"}]},"visit_info":{"anyOf":[{"$ref":"#/components/schemas/VisitInfo"},{"type":"null"}]},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"website":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Website"},"rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rating"},"user_ratings_total":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"User Ratings Total"},"price_level":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Price Level"},"types":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Types"},"place_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Place Id"},"wheelchair_accessible":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Wheelchair Accessible"},"last_metadata_update":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Metadata Update"},"verified":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Verified","default":false}},"type":"object","title":"POIMetadata","description":"Complete metadata for a POI"},"POIMetadataUpdate":{"properties":{"coordinates":{"anyOf":[{"$ref":"#/components/schemas/CoordinatesUpdate"},{"type":"null"}]},"visit_info":{"anyOf":[{"$ref":"#/components/schemas/VisitInfoUpdate"},{"type":"null"}]},"operation_hours":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Operation Hours"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"website":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Website"},"wheelchair_accessible":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Wheelchair Accessible"},"verified":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Verified"}},"type":"object","title":"POIMetadataUpdate","description":"Model for updating POI metadata"},"POIPair":{"properties":{"origin_poi_id":{"type":"string","title":"Origin Poi Id"},"origin_poi_name":{"type":"string","title":"Origin Poi Name"},"destination_poi_id":{"type":"string","title":"Destination Poi Id"},"destination_poi_name":{"type":"string","title":"Destination Poi Name"},"walking":{"anyOf":[{"$ref":"#/components/schemas/TravelMode"},{"type":"null"}]},"transit":{"anyOf":[{"$ref":"#/components/schemas/TravelMode"},{"type":"null"}]},"driving":{"anyOf":[{"$ref":"#/components/schemas/TravelMode"},{"type":"null"}]}},"type":"object","required":["origin_poi_id","origin_poi_name","destination_poi_id","destination_poi_name"],"title":"POIPair","description":"Distance/duration between two POIs"},"POIReplacementItem":{"properties":{"original_poi":{"type":"string","title":"Original Poi","description":"POI name to replace"},"replacement_poi":{"type":"string","title":"Replacement Poi","description":"Backup POI name to use as replacement"},"day":{"type":"integer","minimum":1.0,"title":"Day","description":"Day number where POI is located"}},"type":"object","required":["original_poi","replacement_poi","day"],"title":"POIReplacementItem","description":"Single POI replacement item"},"POIReplacementRequest":{"properties":{"original_poi":{"type":"string","title":"Original Poi","description":"POI name to replace"},"replacement_poi":{"type":"string","title":"Replacement Poi","description":"Backup POI name to use as replacement"},"mode":{"type":"string","pattern":"^(simple|reoptimize)$","title":"Mode","description":"Save mode: 'simple' or 'reoptimize'"},"language":{"type":"string","title":"Language","description":"Tour language code (ISO 639-1, e.g., 'en', 'zh-cn')","default":"en"},"day":{"type":"integer","minimum":1.0,"title":"Day","description":"Day number where POI is located"}},"type":"object","required":["original_poi","replacement_poi","mode","day"],"title":"POIReplacementRequest","description":"Request to replace a POI in a tour (deprecated - use BatchPOIReplacementRequest)"},"POIReplacementResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether replacement was successful"},"tour_id":{"type":"string","title":"Tour Id","description":"Tour identifier"},"new_version":{"type":"integer","title":"New Version","description":"New version number"},"new_version_string":{"type":"string","title":"New Version String","description":"New version string (e.g., 'v2_2026-02-06')"},"replaced_poi":{"type":"string","title":"Replaced Poi","description":"Original POI that was replaced"},"with_poi":{"type":"string","title":"With Poi","description":"New POI that replaced the original"},"mode_used":{"type":"string","title":"Mode Used","description":"Save mode that was used"},"optimization_scores":{"anyOf":[{"$ref":"#/components/schemas/OptimizationScores"},{"type":"null"}],"description":"New optimization scores (if reoptimized)"},"message":{"type":"string","title":"Message","description":"Success message"}},"type":"object","required":["success","tour_id","new_version","new_version_string","replaced_poi","with_poi","mode_used","message"],"title":"POIReplacementResponse","description":"Response after POI replacement (deprecated - use BatchPOIReplacementResponse)"},"POISummary":{"properties":{"poi_id":{"type":"string","title":"Poi Id"},"poi_name":{"type":"string","title":"Poi Name"},"city":{"type":"string","title":"City"},"has_metadata":{"type":"boolean","title":"Has Metadata"},"has_coordinates":{"type":"boolean","title":"Has Coordinates"},"last_updated":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Updated"}},"type":"object","required":["poi_id","poi_name","city","has_metadata","has_coordinates"],"title":"POISummary","description":"Summary information about a POI"},"RejectedPOI":{"properties":{"poi":{"type":"string","title":"Poi","description":"Rejected POI name"},"reason":{"type":"string","title":"Reason","description":"Why this POI was rejected"}},"type":"object","required":["poi","reason"],"title":"RejectedPOI","description":"POI that was rejected during selection"},"ResearchBasicInfo":{"properties":{"period":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Period","description":"Historical period"},"date_built":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Date Built","description":"Construction date"},"date_relative":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Date Relative","description":"Relative date (e.g., '447 BC')"},"current_state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current State","description":"Current condition/state"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Brief description"},"labels":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Labels","description":"Classification labels"}},"type":"object","title":"ResearchBasicInfo","description":"Basic information about a POI from research"},"ResearchConcept":{"properties":{"name":{"type":"string","title":"Name","description":"Concept name"},"explanation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Explanation","description":"Detailed explanation"},"labels":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Labels","description":"Classification labels"}},"type":"object","required":["name"],"title":"ResearchConcept","description":"Concept or theme associated with a POI"},"ResearchData":{"properties":{"poi_id":{"type":"string","title":"Poi Id","description":"POI identifier"},"name":{"type":"string","title":"Name","description":"POI name"},"city":{"type":"string","title":"City","description":"City name"},"basic_info":{"anyOf":[{"$ref":"#/components/schemas/ResearchBasicInfo"},{"type":"null"}]},"core_features":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Core Features","description":"List of core features"},"people":{"anyOf":[{"items":{"$ref":"#/components/schemas/ResearchPerson"},"type":"array"},{"type":"null"}],"title":"People","description":"Associated people"},"events":{"anyOf":[{"items":{"$ref":"#/components/schemas/ResearchEvent"},"type":"array"},{"type":"null"}],"title":"Events","description":"Associated events"},"locations":{"anyOf":[{"items":{"$ref":"#/components/schemas/ResearchLocation"},"type":"array"},{"type":"null"}],"title":"Locations","description":"Sub-locations"},"concepts":{"anyOf":[{"items":{"$ref":"#/components/schemas/ResearchConcept"},"type":"array"},{"type":"null"}],"title":"Concepts","description":"Associated concepts"},"raw_yaml":{"type":"string","title":"Raw Yaml","description":"Raw YAML content"}},"type":"object","required":["poi_id","name","city","raw_yaml"],"title":"ResearchData","description":"Complete research data for a POI"},"ResearchEvent":{"properties":{"name":{"type":"string","title":"Name","description":"Event name"},"date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Date","description":"Event date"},"significance":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Significance","description":"Historical significance"},"labels":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Labels","description":"Classification labels"}},"type":"object","required":["name"],"title":"ResearchEvent","description":"Historical event associated with a POI"},"ResearchLocation":{"properties":{"name":{"type":"string","title":"Name","description":"Location name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Location description"},"labels":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Labels","description":"Classification labels"}},"type":"object","required":["name"],"title":"ResearchLocation","description":"Location or sub-location within a POI"},"ResearchPerson":{"properties":{"name":{"type":"string","title":"Name","description":"Person's name"},"role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Role","description":"Role or title"},"personality":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Personality","description":"Personality description"},"origin":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Origin","description":"Place of origin"},"relationship_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Relationship Type","description":"Type of relationship to POI"},"labels":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Labels","description":"Classification labels"}},"type":"object","required":["name"],"title":"ResearchPerson","description":"Person associated with a POI"},"TourDay":{"properties":{"day":{"type":"integer","title":"Day","description":"Day number"},"pois":{"items":{"$ref":"#/components/schemas/TourPOI"},"type":"array","title":"Pois","description":"POIs for this day"},"total_hours":{"type":"number","title":"Total Hours","description":"Total hours for this day"},"total_walking_km":{"type":"number","title":"Total Walking Km","description":"Total walking distance in km"},"start_time":{"type":"string","title":"Start Time","description":"Start time for the day"}},"type":"object","required":["day","pois","total_hours","total_walking_km","start_time"],"title":"TourDay","description":"Single day in a tour itinerary"},"TourDetail":{"properties":{"metadata":{"allOf":[{"$ref":"#/components/schemas/TourMetadata"}],"description":"Tour metadata"},"itinerary":{"items":{"$ref":"#/components/schemas/TourDay"},"type":"array","title":"Itinerary","description":"Day-by-day itinerary"},"input_parameters":{"type":"object","title":"Input Parameters","description":"Input parameters for tour generation"},"backup_pois":{"additionalProperties":{"items":{"$ref":"#/components/schemas/BackupPOI"},"type":"array"},"type":"object","title":"Backup Pois","description":"Backup POIs per selected POI"},"rejected_pois":{"items":{"$ref":"#/components/schemas/RejectedPOI"},"type":"array","title":"Rejected Pois","description":"POIs that were rejected"},"optimization_scores":{"allOf":[{"$ref":"#/components/schemas/OptimizationScores"}],"description":"Optimization metrics"},"constraints_violated":{"items":{"type":"string"},"type":"array","title":"Constraints Violated","description":"List of constraint violations"}},"type":"object","required":["metadata","itinerary","input_parameters","optimization_scores"],"title":"TourDetail","description":"Complete tour details"},"TourGenerationRequest":{"properties":{"city":{"type":"string","title":"City","description":"City name (e.g., rome, paris)"},"days":{"type":"integer","maximum":14.0,"minimum":1.0,"title":"Days","description":"Number of days for the trip"},"interests":{"items":{"type":"string"},"type":"array","title":"Interests","description":"List of interests","default":[]},"provider":{"type":"string","pattern":"^(anthropic|openai|google)$","title":"Provider","default":"anthropic"},"must_see":{"items":{"type":"string"},"type":"array","title":"Must See","description":"POIs that must be included","default":[]},"pace":{"type":"string","pattern":"^(relaxed|normal|packed)$","title":"Pace","default":"normal"},"walking":{"type":"string","pattern":"^(low|moderate|high)$","title":"Walking","default":"moderate"},"language":{"type":"string","title":"Language","description":"Language code (ISO 639-1)","default":"en"},"mode":{"type":"string","pattern":"^(simple|ilp)$","title":"Mode","default":"simple"},"start_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Start Location","description":"Starting point"},"end_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"End Location","description":"Ending point"},"start_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Start Date","description":"Trip start date (YYYY-MM-DD)"},"save":{"type":"boolean","title":"Save","description":"Whether to save the tour","default":true}},"type":"object","required":["city","days"],"title":"TourGenerationRequest","description":"Request model for tour generation"},"TourGenerationResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"tour_id":{"type":"string","title":"Tour Id"},"city":{"type":"string","title":"City"},"duration_days":{"type":"integer","title":"Duration Days"},"total_pois":{"type":"integer","title":"Total Pois"},"message":{"type":"string","title":"Message"},"itinerary":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Itinerary"},"optimization_scores":{"anyOf":[{"additionalProperties":{"type":"number"},"type":"object"},{"type":"null"}],"title":"Optimization Scores"}},"type":"object","required":["success","tour_id","city","duration_days","total_pois","message"],"title":"TourGenerationResponse","description":"Response model for tour generation"},"TourMetadata":{"properties":{"tour_id":{"type":"string","title":"Tour Id","description":"Unique tour identifier"},"city":{"type":"string","title":"City","description":"City name"},"created_at":{"type":"string","title":"Created At","description":"Creation timestamp"},"updated_at":{"type":"string","title":"Updated At","description":"Last update timestamp"},"languages":{"items":{"type":"string"},"type":"array","title":"Languages","description":"Available language codes"},"current_version":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Current Version","description":"Current version number (legacy)"},"version_history":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Version History","description":"Version history (legacy)"}},"additionalProperties":true,"type":"object","required":["tour_id","city","created_at","updated_at"],"title":"TourMetadata","description":"Tour metadata and version history"},"TourPOI":{"properties":{"poi":{"type":"string","title":"Poi","description":"POI name"},"reason":{"type":"string","title":"Reason","description":"Why this POI was selected"},"suggested_day":{"type":"integer","title":"Suggested Day","description":"Suggested day number"},"estimated_hours":{"type":"number","title":"Estimated Hours","description":"Estimated visit duration in hours"},"priority":{"type":"string","title":"Priority","description":"Priority level (high/medium/low)"},"coordinates":{"type":"object","title":"Coordinates"},"operation_hours":{"type":"object","title":"Operation Hours"},"visit_info":{"type":"object","title":"Visit Info"},"period":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Period","description":"Historical period"},"date_built":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Date Built","description":"Construction date"},"walking_time_to_next":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Walking Time To Next","description":"Walking time to next POI"},"distance_to_next_km":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Distance To Next Km","description":"Distance to next POI in km"}},"type":"object","required":["poi","reason","suggested_day","estimated_hours","priority"],"title":"TourPOI","description":"POI within a tour itinerary"},"TourSummary":{"properties":{"tour_id":{"type":"string","title":"Tour Id","description":"Unique tour identifier"},"city":{"type":"string","title":"City","description":"City name"},"duration_days":{"type":"integer","title":"Duration Days","description":"Number of days"},"total_pois":{"type":"integer","title":"Total Pois","description":"Total number of POIs"},"interests":{"items":{"type":"string"},"type":"array","title":"Interests","description":"User interests"},"created_at":{"type":"string","title":"Created At","description":"Creation timestamp"},"optimization_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Optimization Score","description":"Overall optimization score"}},"type":"object","required":["tour_id","city","duration_days","total_pois","created_at"],"title":"TourSummary","description":"Summary of a tour for list view"},"TranscriptData":{"properties":{"transcript":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transcript","description":"Full transcript text"},"summary":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Summary","description":"List of summary points"},"has_transcript":{"type":"boolean","title":"Has Transcript","description":"Whether transcript file exists"},"has_summary":{"type":"boolean","title":"Has Summary","description":"Whether summary file exists"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","description":"ISO 639-1 language code of returned transcript (e.g., 'en', 'fr')"},"available_languages":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Available Languages","description":"List of available language codes for this POI"}},"type":"object","required":["has_transcript","has_summary"],"title":"TranscriptData","description":"Transcript and summary data for a POI"},"TranscriptLink":{"properties":{"poi":{"type":"string","title":"Poi","description":"POI name"},"poi_id":{"type":"string","title":"Poi Id","description":"POI identifier (kebab-case)"},"transcript_path":{"type":"string","title":"Transcript Path","description":"Relative path to transcript file"},"transcript_version":{"type":"string","title":"Transcript Version","description":"Transcript version (e.g., 'v1')"},"transcript_type":{"type":"string","title":"Transcript Type","description":"Type: 'standard' or 'custom'"},"linked_at":{"type":"string","title":"Linked At","description":"ISO timestamp when link was created"}},"type":"object","required":["poi","poi_id","transcript_path","transcript_version","transcript_type","linked_at"],"title":"TranscriptLink","description":"Link from tour to transcript file"},"TranscriptLinks":{"properties":{"tour_id":{"type":"string","title":"Tour Id","description":"Tour identifier"},"language":{"type":"string","title":"Language","description":"Language code"},"created_at":{"type":"string","title":"Created At","description":"ISO timestamp when links were created"},"links":{"items":{"$ref":"#/components/schemas/TranscriptLink"},"type":"array","title":"Links","description":"List of transcript links"}},"type":"object","required":["tour_id","language","created_at","links"],"title":"TranscriptLinks","description":"Collection of transcript links for a tour"},"TranscriptUpdate":{"properties":{"transcript":{"type":"string","minLength":1,"title":"Transcript","description":"Updated transcript text"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","description":"ISO 639-1 language code (e.g., 'en', 'fr', 'es')","default":"en"}},"type":"object","required":["transcript"],"title":"TranscriptUpdate","description":"Model for updating transcript content"},"TravelMode":{"properties":{"duration_minutes":{"type":"number","title":"Duration Minutes","description":"Duration in minutes"},"distance_km":{"type":"number","title":"Distance Km","description":"Distance in kilometers"},"duration_text":{"type":"string","title":"Duration Text","description":"Human-readable duration"},"distance_text":{"type":"string","title":"Distance Text","description":"Human-readable distance"}},"type":"object","required":["duration_minutes","distance_km","duration_text","distance_text"],"title":"TravelMode","description":"Travel information for a specific mode"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"ValidationIssue":{"properties":{"type":{"type":"string","pattern":"^(error|warning)$","title":"Type"},"message":{"type":"string","title":"Message"},"entity":{"type":"string","title":"Entity"},"poi":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Poi"},"combo_ticket":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Combo Ticket"}},"type":"object","required":["type","message","entity"],"title":"ValidationIssue","description":"Validation issue model"},"ValidationResponse":{"properties":{"valid":{"type":"boolean","title":"Valid"},"issues":{"items":{"$ref":"#/components/schemas/ValidationIssue"},"type":"array","title":"Issues"},"count":{"type":"integer","title":"Count"}},"type":"object","required":["valid","issues","count"],"title":"ValidationResponse","description":"Validation response"},"VerificationReport":{"properties":{"city":{"type":"string","title":"City"},"total_pois":{"type":"integer","title":"Total Pois"},"complete":{"type":"integer","title":"Complete"},"incomplete":{"type":"integer","title":"Incomplete"},"missing_fields":{"additionalProperties":{"type":"integer"},"type":"object","title":"Missing Fields"},"pois":{"items":{"type":"object"},"type":"array","title":"Pois"}},"type":"object","required":["city","total_pois","complete","incomplete","missing_fields","pois"],"title":"VerificationReport","description":"POI metadata verification report"},"VisitInfo":{"properties":{"indoor_outdoor":{"type":"string","title":"Indoor Outdoor","description":"Whether POI is indoor, outdoor, or unknown"},"typical_duration_minutes":{"type":"integer","title":"Typical Duration Minutes","description":"Typical visit duration in minutes"},"accessibility":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Accessibility","description":"Accessibility information"}},"type":"object","required":["indoor_outdoor","typical_duration_minutes"],"title":"VisitInfo","description":"Visit information for a POI"},"VisitInfoUpdate":{"properties":{"indoor_outdoor":{"type":"string","pattern":"^(indoor|outdoor|mixed|unknown)$","title":"Indoor Outdoor"},"typical_duration_minutes":{"type":"integer","maximum":480.0,"minimum":1.0,"title":"Typical Duration Minutes"},"accessibility":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Accessibility"}},"type":"object","required":["indoor_outdoor","typical_duration_minutes"],"title":"VisitInfoUpdate","description":"Model for updating visit information"},"api_combo_tickets__SuccessResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"data":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Data"}},"type":"object","required":["success","message"],"title":"SuccessResponse","description":"Generic success response"},"api_models__SuccessResponse":{"properties":{"message":{"type":"string","title":"Message"},"data":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Data"}},"type":"object","required":["message"],"title":"SuccessResponse","description":"Generic success response"}}}}